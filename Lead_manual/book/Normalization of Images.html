<!DOCTYPE HTML>
<html lang="en-US" manifest="./manifest.appcache">
    
    <head>
        
        <meta charset="UTF-8">
        <title>Normalizing the Images | Welcome to Lead-DBS</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 0.5.2">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href=".//checking_the_coregistration.html" />
    
    
    <link rel="prev" href="./Formatting the Image File Names.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">


        
    <div class="book"  data-level="3" data-basepath="." data-revision="1403681067992">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/null" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="./" >Welcome to Lead-DBS</a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        

        

        

        

        <li data-level="0" data-path="index.html">
            <a href="./"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
    
        <li class="chapter " data-level="1" data-path="Installation.html">
            
            <a href="./Installation.html">
                <i class="fa fa-check"></i> <b>1.</b> Installation
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="Setting a Path for _Lead-DBS_ in MATLAB.html">
            
            <a href="./Setting a Path for _Lead-DBS_ in MATLAB.html">
                <i class="fa fa-check"></i> <b>1.1.</b> Setting a Path for Lead-DBS in MATLAB
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Acquiring and Setting Atlases.html">
            
            <a href="./Acquiring and Setting Atlases.html">
                <i class="fa fa-check"></i> <b>1.2.</b> Acquiring and Setting Atlases
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Lead-DBS Main Window and Loading Images.html">
            
            <a href="./Lead-DBS Main Window and Loading Images.html">
                <i class="fa fa-check"></i> <b>2.</b> Lead-DBS Main Window and Loading Images
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="Formatting the Image File Names.html">
            
            <a href="./Formatting the Image File Names.html">
                <i class="fa fa-check"></i> <b>2.1.</b> Renaming the Image Files
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Normalization of Images.html">
            
            <a href="./Normalization of Images.html">
                <i class="fa fa-check"></i> <b>3.</b> Normalizing the Images
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="/checking_the_coregistration.html">
            
            <a href=".//checking_the_coregistration.html">
                <i class="fa fa-check"></i> <b>3.1.</b> Checking the Coregistrations and Normalizations
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Reconstruction of Electrode Trajectory.html">
            
            <a href="./Reconstruction of Electrode Trajectory.html">
                <i class="fa fa-check"></i> <b>4.</b> Reconstructing the Electrode Trajectory
            </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="/automatic_reconstruction.html">
            
            <a href=".//automatic_reconstruction.html">
                <i class="fa fa-check"></i> <b>4.1.</b> Automatic Selection of Entry Points
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="/manual_reconstruction.html">
            
            <a href=".//manual_reconstruction.html">
                <i class="fa fa-check"></i> <b>4.2.</b> Manual Selection of Entry Points
            </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="manual_correction_of_electrode_localization/README.html">
            
            <a href="./manual_correction_of_electrode_localization/README.html">
                <i class="fa fa-check"></i> <b>5.</b> Manual Correction of Electrode Localization
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="writing_2d_images/README.html">
            
            <a href="./writing_2d_images/README.html">
                <i class="fa fa-check"></i> <b>6.</b> Writing 2D Images
            </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="Creating the 3D Scene.html">
            
            <a href="./Creating the 3D Scene.html">
                <i class="fa fa-check"></i> <b>7.</b> Creating the 3D Scene
            </a>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 46.15384615384615%;min-width: 38.46153846153846%;"></div>
    </div>
    <div class="chapters">
    
        <a href="./index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="./Installation.html" title="Installation" class="chapter done new-chapter" data-progress="1" style="left: 7.6923076923076925%;"></a>
    
        <a href="./Setting a Path for _Lead-DBS_ in MATLAB.html" title="Setting a Path for Lead-DBS in MATLAB" class="chapter done " data-progress="1.1" style="left: 15.384615384615385%;"></a>
    
        <a href="./Acquiring and Setting Atlases.html" title="Acquiring and Setting Atlases" class="chapter done " data-progress="1.2" style="left: 23.076923076923077%;"></a>
    
        <a href="./Lead-DBS Main Window and Loading Images.html" title="Lead-DBS Main Window and Loading Images" class="chapter done new-chapter" data-progress="2" style="left: 30.76923076923077%;"></a>
    
        <a href="./Formatting the Image File Names.html" title="Renaming the Image Files" class="chapter done " data-progress="2.1" style="left: 38.46153846153846%;"></a>
    
        <a href="./Normalization of Images.html" title="Normalizing the Images" class="chapter done new-chapter" data-progress="3" style="left: 46.15384615384615%;"></a>
    
        <a href=".//checking_the_coregistration.html" title="Checking the Coregistrations and Normalizations" class="chapter  " data-progress="3.1" style="left: 53.84615384615385%;"></a>
    
        <a href="./Reconstruction of Electrode Trajectory.html" title="Reconstructing the Electrode Trajectory" class="chapter  new-chapter" data-progress="4" style="left: 61.53846153846154%;"></a>
    
        <a href=".//automatic_reconstruction.html" title="Automatic Selection of Entry Points" class="chapter  " data-progress="4.1" style="left: 69.23076923076923%;"></a>
    
        <a href=".//manual_reconstruction.html" title="Manual Selection of Entry Points" class="chapter  " data-progress="4.2" style="left: 76.92307692307692%;"></a>
    
        <a href="./manual_correction_of_electrode_localization/README.html" title="Manual Correction of Electrode Localization" class="chapter  new-chapter" data-progress="5" style="left: 84.61538461538461%;"></a>
    
        <a href="./writing_2d_images/README.html" title="Writing 2D Images" class="chapter  new-chapter" data-progress="6" style="left: 92.3076923076923%;"></a>
    
        <a href="./Creating the 3D Scene.html" title="Creating the 3D Scene" class="chapter  new-chapter" data-progress="7" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_7">
                    
                        <h2 id="normalizing-the-images">Normalizing the Images</h2>
<p><em>Lead-DBS</em> allows the user to automatically normalize the patient images into MNI space.</p>
<p>In this process, post-operative images are first coregistered with each other. These are then coregistered with the pre-operative images, in case they are available. Finally, all coregistrations are normalized into the MNI space.</p>
<p><em>Lead-DBS</em> comes with the following built-in normalization protocols:</p>
<ul>
<li><em>SPM DARTEL nonlinear (automatic):</em>
This protocol uses the Diffeomorphic Anatomical Registration Through Exponentiated Lie Algebra (DARTEL) approach supplied with SPM8 to normalize the preoperative MR-image directly to the ICBM template (in MNI space). The estimated DARTEL flowfields are then applied to the coregistered postoperative versions.</li>
<li><em>SPM DARTEL nonlinear:</em>
This protocol uses the Diffeomorphic Anatomical Registration Through Exponentiated Lie Algebra (DARTEL) approach supplied with SPM8 to normalize the preoperative MR-image directly to the ICBM template (in MNI space). The estimated DARTEL flowfields are then applied to the coregistered postoperative versions. In the process, you are asked by the program whether the image co-registration worked.</li>
<li><em>SPM Segment nonlinear (automatic):</em>
This protocol uses the SPM unified segmentation algorithm from SPM8 on the preoperative MR-image and applies the estimated deformation parameters to the coregistered postoperative versions.</li>
<li><em>SPM Segment nonlinear:</em>
This protocol uses the SPM unified segmentation algorithm from SPM8 on the preoperative MR-image and applies the estimated deformation parameters to the coregistered postoperative versions. In the process, you are asked by the program whether the image co-registration worked.</li>
<li><em>Schönecker 2009 linear threestep (Post-OP only):</em>
This protocol uses SPM to linearly coregister the postoperative images into MNI space in three consequtive steps, each focusing more on the subcortical target region. The last step spares the ventricles, which may largely vary in their subject-specific anatomy the most.</li>
<li><em>Schönecker 2009 linear threestep (include Pre-OP):</em>
This protocol uses SPM to linearly coregister the preoperative images into MNI space in three consequtive steps, each focusing more on the subcortical target region. The last step spares the ventricles, which may largely vary in their subject-specific anatomy the most. The estimated deformation matrix is then applied to coregistered postoperative images.</li>
<li><em>Fuse CT with pre-operative MRI:</em>
This protocol aims at fusing CT with MRI images and normalizing the images to MNI space based on parameters found for the MRI images. For now, this algorithm doesn&#39;t work robustly. To coregister MRI with CT images we propose the use of Slicer 3D or the Yale Bioimage Suite.</li>
</ul>
<p>You can select the protocol to run depending on the image files that are available for processing.
You can easily include your own normalization procedure by writing a function &quot;ea_normalize_yourprocedure(options)&quot;.</p>
<p>Add the following lines to the beginning of your code:</p>
<p><code>if ischar(options) % return name of method.</code>
<code>varargout{1}=&#39;My normalization technique&#39;;</code>
<code>return;</code>
<code>end</code></p>
<p>After loading the patient directory and choosing the imaging technique (see <strong>Section 2</strong>), check the option <code>[] Normalize</code> and press <code>Run</code>. During this process, the user will be asked to evaluate the coregistrations. Details on this step can be found in <strong>Section 3.1</strong>.</p>
<p><em>Lead-DBS</em> gives the user the option of also normalizing fiber tracking images into MNI space, when available. For processing of these images, the option <code>[] Normalize Fibers</code> must be checked.</p>
<p>The option <code>[] Check</code> lets the user look at the different views of the normalized images at the end of the process.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="./Formatting the Image File Names.html" class="navigation navigation-prev " aria-label="Previous page: Renaming the Image Files"><i class="fa fa-angle-left"></i></a>
        
        
        <a href=".//checking_the_coregistration.html" class="navigation navigation-next " aria-label="Next page: Checking the Coregistrations and Normalizations"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
<script src="gitbook/app.js"></script>

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
